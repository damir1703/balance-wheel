<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ĞšĞ¾Ğ»ĞµÑĞ¾ Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ°</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0a0a;
    --card: #1a1a1a;
    --card-2: #222222;
    --accent: #e63946;
    --accent-dim: rgba(230,57,70,0.15);
    --text: #ffffff;
    --text-secondary: #888888;
    --border: rgba(255,255,255,0.07);
    --radius: 14px;
    --radius-sm: 8px;
  }

  html, body {
    height: 100%;
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-size: 14px;
    line-height: 1.5;
    overflow-x: hidden;
  }

  /* â”€â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .app {
    display: flex;
    min-height: 100vh;
  }

  .left-col {
    width: 40%;
    min-width: 300px;
    background: var(--card);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }

  .right-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-y: auto;
  }

  .s-header { padding: 32px 28px 20px; }
  .s-form   { padding: 0 28px; flex: 1; }
  .s-stats  { padding: 0 28px 16px; }
  .s-btn    { padding: 0 28px 32px; }
  .s-chart  { padding: 32px 28px; width: 100%; display: flex; flex-direction: column; align-items: center; }

  /* â”€â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .header-label {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--accent-dim);
    border: 1px solid rgba(230,57,70,0.3);
    color: var(--accent);
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 100px;
    margin-bottom: 12px;
  }

  .header-label::before {
    content: '';
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--accent);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .header h1 {
    font-size: clamp(20px, 3vw, 28px);
    font-weight: 700;
    letter-spacing: -0.02em;
    line-height: 1.2;
    margin-bottom: 6px;
  }

  .header h1 span { color: var(--accent); }

  .header p {
    color: var(--text-secondary);
    font-size: 13px;
    line-height: 1.6;
  }

  /* â”€â”€â”€ CATEGORIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .categories {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-bottom: 20px;
  }

  .category-item {
    background: var(--card-2);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    overflow: hidden;
    transition: border-color 0.2s;
  }

  .category-item:hover {
    border-color: rgba(230,57,70,0.3);
  }

  .category-item.open {
    border-color: rgba(230,57,70,0.35);
  }

  /* Clickable header row */
  .category-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 11px 14px 0;
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .category-emoji {
    font-size: 16px;
    line-height: 1;
    flex-shrink: 0;
  }

  .category-title-wrap {
    flex: 1;
    min-width: 0;
  }

  .category-name {
    font-size: 12px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: 0.04em;
    display: block;
    line-height: 1.2;
  }

  .category-sub {
    font-size: 11px;
    color: var(--text-secondary);
    display: block;
    margin-top: 1px;
  }

  .chevron {
    width: 16px;
    height: 16px;
    color: var(--text-secondary);
    transition: transform 0.3s ease, color 0.2s;
    flex-shrink: 0;
  }

  .category-item.open .chevron {
    transform: rotate(90deg);
    color: var(--accent);
  }

  /* Accordion description */
  .category-desc {
    max-height: 0;
    overflow: hidden;
    opacity: 0;
    transition: max-height 0.35s ease, opacity 0.25s ease, padding 0.25s ease;
    padding: 0 14px;
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
  }

  .category-item.open .category-desc {
    max-height: 100px;
    opacity: 1;
    padding: 8px 14px 2px;
  }

  /* Controls row */
  .category-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px 12px;
  }

  /* Slider */
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    flex: 1;
    height: 4px;
    border-radius: 100px;
    outline: none;
    cursor: pointer;
    background: linear-gradient(
      to right,
      var(--accent) 0%,
      var(--accent) var(--val, 44.4%),
      rgba(255,255,255,0.1) var(--val, 44.4%),
      rgba(255,255,255,0.1) 100%
    );
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 18px; height: 18px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    box-shadow: 0 0 0 3px rgba(230,57,70,0.2);
    transition: box-shadow 0.2s, transform 0.15s;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    box-shadow: 0 0 0 5px rgba(230,57,70,0.25);
    transform: scale(1.1);
  }

  input[type="range"]::-moz-range-thumb {
    width: 18px; height: 18px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
    border: none;
    box-shadow: 0 0 0 3px rgba(230,57,70,0.2);
  }

  input[type="range"]::-moz-range-track {
    height: 4px;
    background: rgba(255,255,255,0.1);
    border-radius: 100px;
  }

  /* Number input */
  .num-input {
    width: 44px; height: 36px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text);
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    text-align: center;
    outline: none;
    cursor: text;
    transition: border-color 0.2s;
    -moz-appearance: textfield;
  }

  .num-input::-webkit-outer-spin-button,
  .num-input::-webkit-inner-spin-button { -webkit-appearance: none; }

  .num-input:focus {
    border-color: var(--accent);
    box-shadow: 0 0 0 2px rgba(230,57,70,0.15);
  }

  /* â”€â”€â”€ STATS CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .stats-card {
    background: linear-gradient(135deg, rgba(230,57,70,0.1) 0%, rgba(230,57,70,0.03) 100%);
    border: 1px solid rgba(230,57,70,0.25);
    border-radius: var(--radius);
    padding: 16px 18px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .stats-label { color: var(--text-secondary); font-size: 13px; }

  .stats-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--accent);
    letter-spacing: -0.03em;
  }

  .stats-value span {
    font-size: 14px;
    font-weight: 400;
    color: var(--text-secondary);
  }

  /* â”€â”€â”€ PDF BUTTON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .btn-pdf {
    width: 100%;
    padding: 14px;
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.02em;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
    box-shadow: 0 4px 20px rgba(230,57,70,0.3);
  }

  .btn-pdf:hover {
    background: #c1121f;
    box-shadow: 0 6px 28px rgba(230,57,70,0.45);
    transform: translateY(-1px);
  }

  .btn-pdf:active { transform: translateY(0); }

  /* â”€â”€â”€ CHART SECTION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .chart-header {
    width: 100%;
    max-width: 560px;
    margin-bottom: 20px;
    text-align: center;
  }

  .chart-title {
    font-size: clamp(16px, 2.5vw, 20px);
    font-weight: 600;
    margin-bottom: 4px;
  }

  .chart-subtitle { color: var(--text-secondary); font-size: 13px; }

  .canvas-wrap {
    width: 100%;
    max-width: 520px;
    aspect-ratio: 1;
    position: relative;
  }

  #radar { width: 100%; height: 100%; display: block; }

  /* â”€â”€â”€ INSIGHT CARDS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .insights {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    width: 100%;
    max-width: 520px;
    margin-top: 20px;
  }

  .insight-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 14px 12px;
    text-align: center;
    transition: border-color 0.2s;
  }

  .insight-card:hover { border-color: rgba(230,57,70,0.3); }
  .insight-icon { font-size: 20px; margin-bottom: 6px; }
  .insight-label { color: var(--text-secondary); font-size: 11px; text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 4px; }
  .insight-value { font-size: 14px; font-weight: 700; color: var(--text); line-height: 1.2; }
  .insight-sub { font-size: 11px; color: var(--text-secondary); margin-top: 2px; }

  /* â”€â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  ::-webkit-scrollbar { width: 4px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

  /* â”€â”€â”€ TABLET â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (min-width: 768px) and (max-width: 1023px) {
    .left-col { width: 45%; }
    .s-header { padding: 24px 20px 16px; }
    .s-form   { padding: 0 20px; }
    .s-stats  { padding: 0 20px 14px; }
    .s-btn    { padding: 0 20px 24px; }
    .s-chart  { padding: 24px 16px; }
  }

  /* â”€â”€â”€ MOBILE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media (max-width: 767px) {
    /* Flatten columns: children flow directly into .app */
    .app { flex-direction: column; }
    .left-col  { display: contents; }
    .right-col { display: contents; }

    /* Reorder sections */
    .s-header { order: 1; background: var(--card); border-bottom: 1px solid var(--border); padding: 20px 16px 16px; }
    .s-chart  { order: 2; padding: 20px 16px; }
    .s-form   { order: 3; background: var(--card); border-top: 1px solid var(--border); padding: 16px 16px 0; }
    .s-stats  { order: 4; background: var(--card); padding: 12px 16px; }
    .s-btn    {
      order: 5;
      background: var(--card);
      padding: 0 16px calc(16px + env(safe-area-inset-bottom));
      position: sticky;
      bottom: 0;
      border-top: 1px solid var(--border);
      padding-top: 12px;
      z-index: 50;
    }

    /* Slider touch targets */
    input[type="range"] { height: 6px; }
    input[type="range"]::-webkit-slider-thumb { width: 22px; height: 22px; }
    input[type="range"]::-moz-range-thumb { width: 22px; height: 22px; }

    .num-input { width: 48px; height: 44px; font-size: 15px; }

    .canvas-wrap { max-width: 90vw; }

    .insights { gap: 8px; }
    .insight-card { padding: 10px 8px; }
    .insight-icon { font-size: 18px; }
    .insight-value { font-size: 13px; }

    .category-name { font-size: 11px; }
    .category-sub  { font-size: 10px; }
  }

  @media (max-width: 400px) {
    .insights { grid-template-columns: 1fr; }
  }

  /* â”€â”€â”€ PRINT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @media print {
    body { background: white; color: black; }
    .left-col { width: 100%; }
    .right-col { width: 100%; page-break-before: always; }
    button { display: none; }
  }
</style>
</head>
<body>

<div class="app" id="app">

  <!-- â•â•â•â• LEFT COL â•â•â•â• -->
  <div class="left-col">

    <!-- 1. Header -->
    <div class="s-header">
      <div class="header">
        <div class="header-label">ĞšĞ¾ÑƒÑ‡Ğ¸Ğ½Ğ³-Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚</div>
        <h1>ĞšĞ¾Ğ»ĞµÑĞ¾ <span>Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ°</span></h1>
        <p>ĞÑ†ĞµĞ½Ğ¸Ñ‚Ğµ ĞºĞ°Ğ¶Ğ´ÑƒÑ ÑÑ€Ñƒ Ğ¶Ğ¸Ğ·Ğ½Ğ¸ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 10 Ğ¸ ÑƒĞ²Ğ¸Ğ´ÑŒÑ‚Ğµ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½Ñƒ ÑĞ²Ğ¾ĞµĞ³Ğ¾ Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞ°</p>
      </div>
    </div>

    <!-- 2. Form -->
    <div class="s-form">
      <div class="categories" id="categories"><!-- js --></div>
    </div>

    <!-- 3. Stats -->
    <div class="s-stats">
      <div class="stats-card">
        <div>
          <div class="stats-label">Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ±Ğ°Ğ»Ğ»</div>
          <div style="color:var(--text-secondary);font-size:11px;margin-top:2px;">Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ ÑÑ€Ğ°Ğ¼</div>
        </div>
        <div class="stats-value" id="avgScore">5.0<span>/10</span></div>
      </div>
    </div>

    <!-- 4. Button -->
    <div class="s-btn">
      <button class="btn-pdf" onclick="window.print()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ PDF
      </button>
    </div>

  </div><!-- /left-col -->

  <!-- â•â•â•â• RIGHT COL â•â•â•â• -->
  <div class="right-col">
    <div class="s-chart">

      <div class="chart-header">
        <div class="chart-title">Ğ Ğ°Ğ´Ğ°Ñ€ Ğ‘Ğ°Ğ»Ğ°Ğ½ÑĞ°</div>
        <div class="chart-subtitle">Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°ÑĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ ÑÑ€Ğ°Ğ¼ Ğ¶Ğ¸Ğ·Ğ½Ğ¸</div>
      </div>

      <div class="canvas-wrap" id="canvasWrap">
        <canvas id="radar"></canvas>
      </div>

      <div class="insights" id="insights">
        <div class="insight-card">
          <div class="insight-icon">ğŸ†</div>
          <div class="insight-label">Ğ¡Ğ¸Ğ»ÑŒĞ½ĞµĞ¹ÑˆĞ°Ñ</div>
          <div class="insight-value" id="insightStrong">â€”</div>
          <div class="insight-sub" id="insightStrongScore"></div>
        </div>
        <div class="insight-card">
          <div class="insight-icon">âš ï¸</div>
          <div class="insight-label">Ğ—Ğ¾Ğ½Ğ° Ñ€Ğ¾ÑÑ‚Ğ°</div>
          <div class="insight-value" id="insightWeak">â€”</div>
          <div class="insight-sub" id="insightWeakScore"></div>
        </div>
        <div class="insight-card">
          <div class="insight-icon">ğŸ“Š</div>
          <div class="insight-label">Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ</div>
          <div class="insight-value" id="insightBalance">â€”</div>
          <div class="insight-sub">Ñ€Ğ°Ğ²Ğ½Ğ¾Ğ¼ĞµÑ€Ğ½Ğ¾ÑÑ‚ÑŒ</div>
        </div>
      </div>

    </div>
  </div><!-- /right-col -->

</div><!-- /app -->

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const CATEGORIES = [
  {
    id: 'energy',
    emoji: 'ğŸ‹ï¸',
    name: 'Ğ­Ğ Ğ Ğ­ĞĞ•Ğ Ğ“Ğ˜Ğ˜',
    sub: 'Ğ—Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ, Ğ¡Ğ¿Ğ¾Ñ€Ñ‚, Ğ’Ğ¸Ñ‚Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ',
    desc: 'Ğ¢Ğ²Ğ¾Ñ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑĞ¸Ğ»Ğ°, ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ Ñ‚ĞµĞ»Ğ° Ğ¸ Ğ¶Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ğ½ÑƒÑ. Ğ­Ñ‚Ğ¾ Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚, Ğ½Ğ° ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑÑ Ğ²ÑÑ‘ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ.',
  },
  {
    id: 'closeness',
    emoji: 'â¤ï¸',
    name: 'Ğ­Ğ Ğ Ğ‘Ğ›Ğ˜Ğ—ĞĞ¡Ğ¢Ğ˜',
    sub: 'ĞÑ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ, Ğ¡ĞµĞ¼ÑŒÑ, Ğ›ÑĞ±Ğ¾Ğ²ÑŒ',
    desc: 'Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° Ğ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‚Ğ²Ğ¾Ğ¸Ñ… ÑĞ°Ğ¼Ñ‹Ñ… Ğ²Ğ°Ğ¶Ğ½Ñ‹Ñ… Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğ¹. Ğ›ÑĞ±Ğ¾Ğ²ÑŒ, Ñ‚ĞµĞ¿Ğ»Ğ¾ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ±Ğ»Ğ¸Ğ·ĞºĞ¸Ñ… Ğ»ÑĞ´ĞµĞ¹.',
  },
  {
    id: 'social',
    emoji: 'ğŸŒ',
    name: 'Ğ­Ğ Ğ Ğ¡Ğ’Ğ¯Ğ—Ğ•Ğ™',
    sub: 'ĞĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ, Ğ”Ñ€ÑƒĞ·ÑŒÑ, ĞĞµÑ‚Ğ²Ğ¾Ñ€ĞºĞ¸Ğ½Ğ³',
    desc: 'Ğ›ÑĞ´Ğ¸ Ğ²Ğ¾ĞºÑ€ÑƒĞ³ Ñ‚ĞµĞ±Ñ â€” Ñ‚Ğ²Ğ¾Ñ‘ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ñ‚ĞµĞ±Ñ. ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ²ÑĞ·ĞµĞ¹ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¶Ğ¸Ğ·Ğ½Ğ¸.',
  },
  {
    id: 'career',
    emoji: 'ğŸ’¼',
    name: 'Ğ­Ğ Ğ Ğ Ğ•ĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ˜',
    sub: 'ĞšĞ°Ñ€ÑŒĞµÑ€Ğ°, Ğ‘Ğ¸Ğ·Ğ½ĞµÑ, Ğ”ĞµĞ»Ğ¾',
    desc: 'Ğ¢Ğ²Ğ¾Ñ‘ Ğ¿Ñ€Ğ¸Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ²ĞºĞ»Ğ°Ğ´ Ğ² Ğ¼Ğ¸Ñ€. Ğ¢Ğ¾, Ñ‡Ñ‚Ğ¾ Ñ‚Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘ÑˆÑŒ Ğ¸ ÑÑ‚Ñ€Ğ¾Ğ¸ÑˆÑŒ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.',
  },
  {
    id: 'finance',
    emoji: 'ğŸ’°',
    name: 'Ğ­Ğ Ğ Ğ¤Ğ˜ĞĞĞĞ¡ĞĞ’',
    sub: 'Ğ”ĞµĞ½ÑŒĞ³Ğ¸, Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸',
    desc: 'Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ğ°Ñ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ° Ğ¸ ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ² Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°ÑˆĞ½ĞµĞ¼ Ğ´Ğ½Ğµ. Ğ”ĞµĞ½ÑŒĞ³Ğ¸ ĞºĞ°Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ñ‚Ğ²Ğ¾ĞµĞ¹ Ğ¶Ğ¸Ğ·Ğ½Ğ¸.',
  },
  {
    id: 'growth',
    emoji: 'ğŸ¯',
    name: 'Ğ­Ğ Ğ Ğ›Ğ˜Ğ§ĞĞĞ¡Ğ¢Ğ˜',
    sub: 'Ğ›Ğ¸Ñ‡Ğ½Ğ¾ÑÑ‚Ğ½Ñ‹Ğ¹ Ñ€Ğ¾ÑÑ‚, Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ñ†ĞµĞ½ĞºĞ°, ĞŸÑĞ¸Ñ…Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ',
    desc: 'Ğ¢Ğ²Ğ¾Ñ‘ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ğµ, Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ğµ ÑĞµĞ±Ñ Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ½Ğ°Ğ´ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸ĞµĞ¼.',
  },
  {
    id: 'rest',
    emoji: 'ğŸ‰',
    name: 'Ğ­Ğ Ğ Ğ’ĞŸĞ•Ğ§ĞĞ¢Ğ›Ğ•ĞĞ˜Ğ™',
    sub: 'Ğ¯Ñ€ĞºĞ¾ÑÑ‚ÑŒ Ğ¶Ğ¸Ğ·Ğ½Ğ¸, Ğ¥Ğ¾Ğ±Ğ±Ğ¸, ĞŸÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ',
    desc: 'Ğ Ğ°Ğ´Ğ¾ÑÑ‚ÑŒ, Ğ¿Ñ€Ğ¸ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ¸ ÑÑ€ĞºĞ¸Ğµ Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚Ñ‹. Ğ¢Ğ¾, Ñ€Ğ°Ğ´Ğ¸ Ñ‡ĞµĞ³Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¾ÑÑ‹Ğ¿Ğ°Ñ‚ÑŒÑÑ ÑƒÑ‚Ñ€Ğ¾Ğ¼.',
  },
  {
    id: 'meaning',
    emoji: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§',
    name: 'Ğ­Ğ Ğ Ğ¡ĞœĞ«Ğ¡Ğ›ĞĞ’',
    sub: 'Ğ”ÑƒÑ…Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ, Ğ¢Ğ²Ğ¾Ñ€Ñ‡ĞµÑÑ‚Ğ²Ğ¾, ĞœĞ¸ÑÑĞ¸Ñ',
    desc: 'Ğ¢Ğ²Ğ¾Ñ Ğ³Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ. Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ñ‡ĞµĞ¼-Ñ‚Ğ¾ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ğ¼, Ñ‡ĞµĞ¼ Ğ¿Ğ¾Ğ²ÑĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾Ğµ.',
  },
];

const LS_KEY = 'wheel_balance_v2';

// â”€â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let values     = {};
let animTarget  = {};
let animCurrent = {};
let animFrame   = null;

// â”€â”€â”€ LOCALSTORAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function loadValues() {
  const defaults = {};
  CATEGORIES.forEach(c => (defaults[c.id] = 5));
  try {
    const saved = localStorage.getItem(LS_KEY);
    if (saved) {
      const parsed = JSON.parse(saved);
      CATEGORIES.forEach(c => {
        const v = parseInt(parsed[c.id]);
        defaults[c.id] = !isNaN(v) && v >= 1 && v <= 10 ? v : 5;
      });
    }
  } catch (e) {}
  return defaults;
}

function saveValues() {
  try { localStorage.setItem(LS_KEY, JSON.stringify(values)); } catch (e) {}
}

// â”€â”€â”€ ACCORDION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function toggleAccordion(item) {
  item.classList.toggle('open');
}

// â”€â”€â”€ BUILD FORM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function buildForm() {
  const container = document.getElementById('categories');
  container.innerHTML = '';

  CATEGORIES.forEach(cat => {
    const val = values[cat.id];
    const pct = pctFromVal(val);

    const item = document.createElement('div');
    item.className = 'category-item';
    item.dataset.id = cat.id;

    item.innerHTML = `
      <div class="category-header">
        <span class="category-emoji">${cat.emoji}</span>
        <div class="category-title-wrap">
          <span class="category-name">${cat.name}</span>
          <span class="category-sub">${cat.sub}</span>
        </div>
        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      </div>
      <div class="category-desc">${cat.desc}</div>
      <div class="category-controls">
        <input
          type="range" min="1" max="10" step="1"
          value="${val}"
          style="--val: ${pct}%"
          data-id="${cat.id}"
          class="slider"
          aria-label="${cat.name}"
        >
        <input
          type="number" min="1" max="10"
          value="${val}"
          data-id="${cat.id}"
          class="num-input"
          aria-label="${cat.name} Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ"
        >
      </div>
    `;

    // Accordion toggle â€” click on header row only
    item.querySelector('.category-header').addEventListener('click', () => toggleAccordion(item));

    // Slider
    item.querySelector('.slider').addEventListener('input', e => {
      updateValue(cat.id, parseInt(e.target.value), 'slider');
    });

    // Number input
    const numInput = item.querySelector('.num-input');
    numInput.addEventListener('input', () => {
      let v = parseInt(numInput.value);
      if (isNaN(v)) return;
      v = Math.max(1, Math.min(10, v));
      updateValue(cat.id, v, 'input');
    });
    numInput.addEventListener('blur', () => {
      let v = parseInt(numInput.value);
      if (isNaN(v) || v < 1) v = 1;
      if (v > 10) v = 10;
      numInput.value = v;
      updateValue(cat.id, v, 'input');
    });
    numInput.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp') {
        e.preventDefault();
        updateValue(cat.id, Math.min(10, values[cat.id] + 1), 'input');
      }
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        updateValue(cat.id, Math.max(1, values[cat.id] - 1), 'input');
      }
    });

    container.appendChild(item);
  });
}

function pctFromVal(v) {
  return ((v - 1) / 9 * 100).toFixed(1);
}

function updateValue(id, v, source) {
  values[id] = v;
  saveValues();

  const pct = pctFromVal(v) + '%';

  if (source !== 'slider') {
    const slider = document.querySelector(`.slider[data-id="${id}"]`);
    if (slider) { slider.value = v; slider.style.setProperty('--val', pct); }
  } else {
    const slider = document.querySelector(`.slider[data-id="${id}"]`);
    if (slider) slider.style.setProperty('--val', pct);
  }
  if (source !== 'input') {
    const inp = document.querySelector(`.num-input[data-id="${id}"]`);
    if (inp) inp.value = v;
  }

  updateStats();
  scheduleAnimation();
}

// â”€â”€â”€ STATS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateStats() {
  const vals = CATEGORIES.map(c => values[c.id]);
  const avg  = vals.reduce((a, b) => a + b, 0) / vals.length;
  document.getElementById('avgScore').innerHTML = avg.toFixed(1) + '<span>/10</span>';

  const maxV   = Math.max(...vals);
  const minV   = Math.min(...vals);
  const maxCat = CATEGORIES[vals.indexOf(maxV)];
  const minCat = CATEGORIES[vals.indexOf(minV)];

  // Second word = the era keyword (Ğ­ĞĞ•Ğ Ğ“Ğ˜Ğ˜, Ğ‘Ğ›Ğ˜Ğ—ĞĞ¡Ğ¢Ğ˜â€¦)
  const keyword = cat => cat.name.split(' ')[1] || cat.name;

  document.getElementById('insightStrong').textContent = keyword(maxCat);
  document.getElementById('insightStrongScore').textContent = `${maxCat.emoji} ${maxV}/10`;

  document.getElementById('insightWeak').textContent = keyword(minCat);
  document.getElementById('insightWeakScore').textContent = `${minCat.emoji} ${minV}/10`;

  const variance = vals.reduce((s, v) => s + Math.pow(v - avg, 2), 0) / vals.length;
  const stdDev   = Math.sqrt(variance);
  const balance  = Math.max(0, Math.round((1 - stdDev / 4.5) * 100));
  document.getElementById('insightBalance').textContent = balance + '%';
}

// â”€â”€â”€ CANVAS / RADAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const canvas = document.getElementById('radar');
const ctx    = canvas.getContext('2d');

function resizeCanvas() {
  const wrap = document.getElementById('canvasWrap');
  const size = wrap.clientWidth;
  if (!size) return;
  const dpr  = window.devicePixelRatio || 1;
  canvas.width  = size * dpr;
  canvas.height = size * dpr;
  canvas.style.width  = size + 'px';
  canvas.style.height = size + 'px';
  ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  drawRadar();
}

function scheduleAnimation() {
  CATEGORIES.forEach(c => { animTarget[c.id] = values[c.id]; });
  if (!animFrame) animateRadar();
}

function animateRadar() {
  let done = true;
  CATEGORIES.forEach(c => {
    const diff = animTarget[c.id] - animCurrent[c.id];
    if (Math.abs(diff) < 0.02) {
      animCurrent[c.id] = animTarget[c.id];
    } else {
      animCurrent[c.id] += diff * 0.18;
      done = false;
    }
  });
  drawRadar();
  animFrame = done ? null : requestAnimationFrame(animateRadar);
}

function drawRadar() {
  const wrap = document.getElementById('canvasWrap');
  const size = wrap.clientWidth;
  if (!size) return;

  const cx   = size / 2;
  const cy   = size / 2;
  const maxR = size * 0.34;
  const N    = CATEGORIES.length;
  const isTiny = size < 320;
  const labelFontSize = isTiny ? 9 : size < 420 ? 10 : 12;

  ctx.clearRect(0, 0, size, size);

  const angle = i => (Math.PI * 2 * i / N) - Math.PI / 2;
  const polar = (r, a) => ({ x: cx + r * Math.cos(a), y: cy + r * Math.sin(a) });

  // Grid rings
  [2, 4, 6, 8, 10].forEach(ring => {
    ctx.beginPath();
    for (let i = 0; i <= N; i++) {
      const p = polar((ring / 10) * maxR, angle(i % N));
      i === 0 ? ctx.moveTo(p.x, p.y) : ctx.lineTo(p.x, p.y);
    }
    ctx.closePath();
    ctx.strokeStyle = 'rgba(255,255,255,0.07)';
    ctx.lineWidth   = 1;
    ctx.stroke();

    ctx.fillStyle   = 'rgba(255,255,255,0.2)';
    ctx.font        = `${labelFontSize - 1}px Inter, sans-serif`;
    ctx.textAlign   = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillText(ring, cx + 4, cy - (ring / 10) * maxR - 4);
  });

  // Axis lines
  CATEGORIES.forEach((_, i) => {
    const p = polar(maxR, angle(i));
    ctx.beginPath();
    ctx.moveTo(cx, cy);
    ctx.lineTo(p.x, p.y);
    ctx.strokeStyle = 'rgba(255,255,255,0.08)';
    ctx.lineWidth   = 1;
    ctx.stroke();
  });

  // Data polygon
  ctx.beginPath();
  CATEGORIES.forEach((cat, i) => {
    const v = animCurrent[cat.id] ?? values[cat.id];
    const p = polar((v / 10) * maxR, angle(i));
    i === 0 ? ctx.moveTo(p.x, p.y) : ctx.lineTo(p.x, p.y);
  });
  ctx.closePath();
  ctx.fillStyle   = 'rgba(230,57,70,0.18)';
  ctx.fill();
  ctx.strokeStyle = '#e63946';
  ctx.lineWidth   = 2;
  ctx.lineJoin    = 'round';
  ctx.stroke();

  // Data points
  CATEGORIES.forEach((cat, i) => {
    const v = animCurrent[cat.id] ?? values[cat.id];
    const p = polar((v / 10) * maxR, angle(i));
    ctx.beginPath();
    ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);
    ctx.fillStyle   = '#e63946';
    ctx.fill();
    ctx.strokeStyle = '#fff';
    ctx.lineWidth   = 1.5;
    ctx.stroke();
  });

  // Axis labels
  const pad = isTiny ? 16 : 22;
  CATEGORIES.forEach((cat, i) => {
    const a = angle(i);
    const p = polar(maxR + pad, a);
    const eps = 0.05;

    ctx.font        = `600 ${labelFontSize}px Inter, sans-serif`;
    ctx.fillStyle   = 'rgba(255,255,255,0.85)';
    ctx.textAlign   = Math.cos(a) > eps ? 'left' : Math.cos(a) < -eps ? 'right' : 'center';
    ctx.textBaseline = Math.sin(a) < -eps ? 'bottom' : Math.sin(a) > eps ? 'top' : 'middle';

    // Show emoji + era keyword
    const keyword = cat.name.split(' ')[1] || cat.name;
    ctx.fillText(`${cat.emoji} ${keyword}`, p.x, p.y);
  });
}

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function init() {
  values = loadValues();
  CATEGORIES.forEach(c => {
    animCurrent[c.id] = values[c.id];
    animTarget[c.id]  = values[c.id];
  });

  buildForm();
  updateStats();
  resizeCanvas();

  new ResizeObserver(() => resizeCanvas()).observe(document.getElementById('canvasWrap'));
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
